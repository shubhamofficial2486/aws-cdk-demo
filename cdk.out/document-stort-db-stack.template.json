{
 "Parameters": {
  "env": {
   "Type": "String",
   "Default": "local"
  },
  "region": {
   "Type": "String",
   "Default": "me-central-1"
  },
  "readCapacity": {
   "Type": "Number",
   "Default": "10"
  },
  "writeCapacity": {
   "Type": "Number",
   "Default": "40"
  },
  "xksaccount": {
   "Type": "String",
   "Default": "111111000000"
  },
  "dynamoKeyId": {
   "Type": "String",
   "Default": "ar4t5ji-5yh4-4221-8190-ey5y5yheeeae"
  }
 },
 "Resources": {
  "documentstoretable5B24CBC6": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "KeySchema": [
     {
      "AttributeName": "document_id",
      "KeyType": "HASH"
     }
    ],
    "AttributeDefinitions": [
     {
      "AttributeName": "document_id",
      "AttributeType": "S"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "ProvisionedThroughput": {
     "ReadCapacityUnits": {
      "Ref": "readCapacity"
     },
     "WriteCapacityUnits": {
      "Ref": "writeCapacity"
     }
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::Join": [
       "",
       [
        "arn:aws:kms:",
        {
         "Ref": "region"
        },
        ":",
        {
         "Ref": "xksaccount"
        },
        ":key/",
        {
         "Ref": "dynamoKeyId"
        }
       ]
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": {
     "Fn::Join": [
      "",
      [
       {
        "Ref": "env"
       },
       "document_store"
      ]
     ]
    },
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "document-store-db-stack/document_store_table/Resource"
   }
  },
  "documentstoretableReadScalingTarget74EDE012": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": {
     "Ref": "readCapacity"
    },
    "MinCapacity": 1,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "table/",
       {
        "Ref": "documentstoretable5B24CBC6"
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/dynamodb.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_DynamoDBTable"
      ]
     ]
    },
    "ScalableDimension": "dynamodb:table:ReadCapacityUnits",
    "ServiceNamespace": "dynamodb"
   },
   "Metadata": {
    "aws:cdk:path": "document-store-db-stack/document_store_table/ReadScaling/Target/Resource"
   }
  },
  "documentstoretableReadScalingTargetTracking97AEB803": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "documentstoredbstackdocumentstoretableReadScalingTargetTracking32E61941",
    "PolicyType": "TargetTrackingScaling",
    "ScalingTargetId": {
     "Ref": "documentstoretableReadScalingTarget74EDE012"
    },
    "TargetTrackingScalingPolicyConfiguration": {
     "PredefinedMetricSpecification": {
      "PredefinedMetricType": "DynamoDBReadCapacityUtilization"
     },
     "TargetValue": 70
    }
   },
   "Metadata": {
    "aws:cdk:path": "document-store-db-stack/document_store_table/ReadScaling/Target/Tracking/Resource"
   }
  },
  "documentstoretableWriteScalingTarget132DB6E1": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": {
     "Ref": "writeCapacity"
    },
    "MinCapacity": 4,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "table/",
       {
        "Ref": "documentstoretable5B24CBC6"
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/dynamodb.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_DynamoDBTable"
      ]
     ]
    },
    "ScalableDimension": "dynamodb:table:WriteCapacityUnits",
    "ServiceNamespace": "dynamodb"
   },
   "Metadata": {
    "aws:cdk:path": "document-store-db-stack/document_store_table/WriteScaling/Target/Resource"
   }
  },
  "documentstoretableWriteScalingTargetTracking49B11C95": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "documentstoredbstackdocumentstoretableWriteScalingTargetTrackingAF3F2577",
    "PolicyType": "TargetTrackingScaling",
    "ScalingTargetId": {
     "Ref": "documentstoretableWriteScalingTarget132DB6E1"
    },
    "TargetTrackingScalingPolicyConfiguration": {
     "PredefinedMetricSpecification": {
      "PredefinedMetricType": "DynamoDBWriteCapacityUtilization"
     },
     "TargetValue": 70
    }
   },
   "Metadata": {
    "aws:cdk:path": "document-store-db-stack/document_store_table/WriteScaling/Target/Tracking/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/12NQWrDMBBFz5K9otil0G1a77IKsS8wHk/MxPIoSKOWIHT3Ypuk0NUf3n/8qe1b9W6r3RF+4h6H6ZDRB7K5VcDJNFc5Q4CZlIK5UPQpIJnGS9SQUJf+j16l8TKwspdilrk8PARmP/Q2d9C7VVmPYuB+d4ywuJDURwTHMtr8BZFaBLdYn6qB+6RknqSDMNL69R/ZoguAE8vYbmtn7xgfT/sFSinmBN9wqD9sZetqd4vM+5BEeSZ72fIXzcGBcBcBAAA="
   },
   "Metadata": {
    "aws:cdk:path": "document-store-db-stack/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Conditions": {
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-2"
       ]
      }
     ]
    }
   ]
  }
 }
}